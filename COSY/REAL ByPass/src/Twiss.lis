 --- BIN FILE READ: BYPASS_REAL_4_fam_NEW_maps
  11528 INCLUDE 'BYPASS_REAL_4_fam_NEW_maps';
  11529   PROCEDURE PICK INDEX MAPARR SPNRARR;
  11530     VARIABLE I 1;
  11531     VARIABLE J 1;
  11532     LOOP I 1 TWOND;
  11533       MSC(I) := MAPARR(I, INDEX);
  11534       ENDLOOP;
  11535     LOOP I 1 3;
  11536       LOOP J 1 3;
  11537         SSCR(I,J) := SPNRARR(I,J,INDEX) + 0*DD(1);
  11538         ENDLOOP;
  11539       ENDLOOP;
  11540     ENDPROCEDURE;
  11541   PROCEDURE MAKEMAP FROM TO START MAPARR SPNRARR;
  11542     VARIABLE J 1;
  11543     WRITE 6 '* '&ST(START);
  11544     LMAPS START MAPARR SPNRARR; %LMAPS:10125
  11545     LOOP J (START+1) TO;
  11546       WRITE 6 '**       '&ST(J);
  11547       PICK J MAPARR SPNRARR; %PICK:11529
  11548       LOCSET 0 0 0 0 0 0; %LOCSET: 1114
  11549       UPDATE 1 1; %UPDATE: 1261
  11550       ENDLOOP;
  11551     LOOP J FROM (START-1);
  11552       WRITE 6 '**       '&ST(J);
  11553       PICK J MAPARR SPNRARR; %PICK:11529
  11554       LOCSET 0 0 0 0 0 0; %LOCSET: 1114
  11555       UPDATE 1 1; %UPDATE: 1261
  11556       ENDLOOP;
  11557     ENDPROCEDURE;
  11558   PROCEDURE GETTWISS0 COORD AL0 BET0 GAM0 MAPARR SPNRARR;
  11559     VARIABLE NUM1 1;
  11560     VARIABLE NUM2 1;
  11561     VARIABLE OBJ 1;
  11562     IF COORD='X';
  11563       NUM1:=1;
  11564       NUM2:=2;
  11565       AL0:=0;
  11566       BET0:=20.0;
  11567       GAM0:=1.0/BET0;
  11568       ELSEIF COORD='Y';
  11569       NUM1:=3;
  11570       NUM2:=4;
  11571       AL0:=0;
  11572       BET0:=3;
  11573       GAM0:=1.0/BET0;
  11574       ELSEIF LO(1);
  11575       WRITE 6 'UNKNOWN COORDINATE';
  11576       ENDIF;
  11577     FIT AL0 BET0 GAM0;
  11578       OBJ:= SQR(SQR(ME(NUM1,NUM1))*BET0-2*ME(NUM1,NUM1)*ME(NUM1,NUM2)*
                  AL0+SQR(ME(NUM1,NUM2))*GAM0-BET0); %ME:  516 %ME:  516 %ME: 
                   516 %ME:  516
  11579       OBJ:=OBJ+ SQR(-ME(NUM1,NUM1)*ME(NUM2,NUM1)*BET0+( ME(NUM1,NUM1)*
                  ME(NUM2,NUM2)+ME(NUM1,NUM2)*ME(NUM2,NUM1) )*AL0-ME(NUM1,NUM2
                  )*ME(NUM2,NUM2)*GAM0-AL0); %ME:  516 %ME:  516 %ME:  516 %ME
                  :  516 %ME:  516 %ME:  516 %ME:  516 %ME:  516
  11580       OBJ:=OBJ+ SQR((ME(NUM2,NUM1)^2)*BET0-2*ME(NUM2,NUM1)*ME(NUM2,NUM
                  2)*AL0+(ME(NUM2,NUM2)^2)*GAM0-(1+AL0^2)/BET0)  ; %ME:  516 %
                  ME:  516 %ME:  516 %ME:  516
  11581       ENDFIT 1E-20 5000 1 OBJ;
  11582     ENDPROCEDURE;
  11583   PROCEDURE BETS TAG COORD NUM_ELE AL0 BET0 GAM0 BETS MAPARR SPNRARR;
  11584     VARIABLE J 1;
  11585     VARIABLE NUM1 1;
  11586     VARIABLE NUM2 1;
  11587     IF COORD='X';
  11588       NUM1:=1;
  11589       NUM2:=2;
  11590       ELSEIF COORD='Y';
  11591       NUM1:=3;
  11592       NUM2:=4;
  11593       ELSEIF LO(1);
  11594       WRITE 6 'UNKNOWN COORDINATE';
  11595       ENDIF;
  11596     UM; %UM: 1488
  11597     BETS(1):=BET0;
  11598     OPENF 800 TAG 'REPLACE';
  11599     WRITE 800 ST(BETS(1))&'     '&ST(0);
  11600     LOOP J 1 NUM_ELE;
  11601       MAKEMAP 1 J 1 MAPARR SPNRARR; %MAKEMAP:11541
  11602       BETS(J+1):=(ME(NUM1,NUM1)^2)*BET0-2*ME(NUM1,NUM1)*ME(NUM1,NUM2)*
                  AL0+(ME(NUM1,NUM2)^2)*GAM0; %ME:  516 %ME:  516 %ME:  516 %M
                  E:  516
  11603       WRITE 800 ST(BETS(J+1))&'     '&ST(J);
  11604       UM; %UM: 1488
  11605       ENDLOOP;
  11606     CLOSEF 800;
  11607     ENDPROCEDURE;
  11608   PROCEDURE GETDISP0 COORD D0 DPR0 MAPARR SPNRARR;
  11609     VARIABLE NUM1 1;
  11610     VARIABLE NUM2 1;
  11611     VARIABLE OBJ 1;
  11612     IF COORD='X';
  11613       NUM1:=1;
  11614       NUM2:=2;
  11615       D0:=0;
  11616       DPR0:=0;
  11617       ELSEIF COORD='Y';
  11618       NUM1:=3;
  11619       NUM2:=4;
  11620       D0:=0;
  11621       DPR0:=0;
  11622       ELSEIF LO(1);
  11623       WRITE 6 'UNKNOWN COORDINATE';
  11624       ENDIF;
  11625     FIT D0 DPR0;
  11626       OBJ:= SQR(  ME(NUM1,NUM1)*D0+ME(NUM1,NUM2)*DPR0+ME(NUM1,6)*(1+1/
                  (CONS(ETA)+1))-D0  ); %ME:  516 %ME:  516 %ME:  516
  11627       OBJ:=OBJ+ SQR(  ME(NUM2,NUM1)*D0+ME(NUM2,NUM2)*DPR0+ME(NUM2,6)*(
                  1+1/(CONS(ETA)+1))-DPR0  )  ; %ME:  516 %ME:  516 %ME:  516
  11628       ENDFIT 1E-20 5000 1 OBJ;
  11629     WRITE 6 'DISP'&COORD&'0' 'DISP_PRIME'&COORD&'0';
  11630     WRITE 6 D0 DPR0;
  11631     ENDPROCEDURE;
  11632   PROCEDURE DISPS TAG COORD NUM_ELE D0 DPR0 DS MAPARR SPNRARR;
  11633     VARIABLE J 1;
  11634     VARIABLE NUM1 1;
  11635     VARIABLE NUM2 1;
  11636     IF COORD='X';
  11637       NUM1:=1;
  11638       NUM2:=2;
  11639       ELSEIF COORD='Y';
  11640       NUM1:=3;
  11641       NUM2:=4;
  11642       ELSEIF LO(1);
  11643       WRITE 6 'UNKNOWN COORDINATE';
  11644       ENDIF;
  11645     UM; %UM: 1488
  11646     DS(1):=D0;
  11647     OPENF 800 TAG 'REPLACE';
  11648     WRITE 800 ST(DS(1))&'     '&ST(0);
  11649     LOOP J 1 NUM_ELE;
  11650       MAKEMAP 1 J 1 MAPARR SPNRARR; %MAKEMAP:11541
  11651       DS(J+1):=ME(NUM1,NUM1)*D0+ME(NUM1,NUM2)*DPR0+ ME(NUM1,6)*(1+1/(C
                  ONS(ETA)+1)); %ME:  516 %ME:  516 %ME:  516
  11652       WRITE 800 ST(DS(J+1))&'     '&ST(J);
  11653       UM; %UM: 1488
  11654       ENDLOOP;
  11655     CLOSEF 800;
  11656     ENDPROCEDURE;
  11657   PROCEDURE MAIN;
  11658     VARIABLE GAMMA 1;
  11659     VARIABLE SGX1 1;
  11660     VARIABLE SGX2 1;
  11661     VARIABLE SGY1 1;
  11662     VARIABLE SGY2 1;
  11663     VARIABLE EB1 1;
  11664     VARIABLE ALPHAX0 1;
  11665     VARIABLE BETAX0 1;
  11666     VARIABLE GAMMAX0 1;
  11667     VARIABLE BETAXS 1 313;
  11668     VARIABLE ALPHAY0 1;
  11669     VARIABLE BETAY0 1;
  11670     VARIABLE GAMMAY0 1;
  11671     VARIABLE BETAYS 1 313;
  11672     VARIABLE DISPX0 1;
  11673     VARIABLE DISPXPR0 1;
  11674     VARIABLE DISPXS 1 313;
  11675     VARIABLE DISPY0 1;
  11676     VARIABLE DISPYPR0 1;
  11677     VARIABLE DISPYS 1 313;
  11678     VARIABLE MAPARR1 1000 6 313;
  11679     VARIABLE SPNRARR1 1000 3 3 313;
  11680     VARIABLE NUM_ELE 1;
  11681     GAMMA := 1.12792344429;
  11682     NUM_ELE := 294;
  11683     OV 3 3 0; %OV:  969
  11684     SET_FOR_DEUTERONS GAMMA; %SET_FOR_DEUTERONS:10561
  11685     EB1 := 0.0;
  11686     SGX1 :=  0.0;
  11687     SGY1  := 0.0;
  11688     SGX2 :=  0.0;
  11689     SGY2  := 0.0;
  11690     ALPHAX0:=-0.794842;
  11691     BETAX0:=5.64817;
  11692     GAMMAX0:=(1+SQR(ALPHAX0))/BETAX0;
  11693     ALPHAY0:=1.90811;
  11694     BETAY0:=15.7893;
  11695     GAMMAY0:=(1+SQR(ALPHAY0))/BETAY0;
  11696     DISPX0:=0.00774243;
  11697     DISPXPR0:=-0.00179774;
  11698     DISPY0:=0.0;
  11699     DISPYPR0:=0.0;
  11700     LATTICE SGX1 SGY1 SGX2 SGY2 EB1 0 MAPARR1 SPNRARR1; %LATTICE:10580

  11701     PM 6; %PM: 1574
  11702     WRITE 6 '++++++++++ Magnetic Rigidity';
  11703     WRITE 6 CONS(CHIM);
  11704     WRITE 6 ME(3,6); %ME:  516
  11705     DISPS 'DISPX' 'X' NUM_ELE DISPX0 DISPXPR0 DISPXS MAPARR1 SPNRARR1;
                   %DISPS:11632
  11706     ENDPROCEDURE;
  11707   PROCEDURE RUN;
  11708     MAIN; %MAIN:11657
  11709     ENDPROCEDURE;
  11710   RUN; %RUN:11707
